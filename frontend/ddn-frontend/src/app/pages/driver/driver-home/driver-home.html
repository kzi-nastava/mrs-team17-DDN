<div class="start-ride-wrap">
  <div class="start-ride-grid">

    <div class="start-left">
      <div class="drive-title">
        <ng-container *ngIf="ride; else noRideTitle">
          Drive #{{ ride.rideId }}
        </ng-container>
        <ng-template #noRideTitle>
          Drive
        </ng-template>
      </div>

      <div class="drive-line" *ngIf="ride; else loadingLines">
        Route start: {{ ride.startAddress }}
      </div>
      <div class="drive-line" *ngIf="ride; else loadingLines2">
        Route end: {{ ride.destinationAddress }}
      </div>

      <div class="drive-line muted" *ngIf="tracking">
        Estimated duration: {{ tracking.etaMinutes }}min
      </div>
      <div class="drive-line muted" *ngIf="ride && !tracking">
        Estimated duration: â€”
      </div>

      <div class="drive-line error" *ngIf="error">
        {{ error }}
      </div>

      <div class="start-actions">
        <button
          class="start-btn"
          type="button"
          (click)="startRide()"
          [disabled]="!canStart()"
        >
          {{ starting ? 'STARTING...' : 'START' }}
        </button>

        <button
          class="cancel-btn"
          type="button"
          (click)="openCancelPopup()"
          [disabled]="!canCancel()"
        >
          CANCEL
        </button>
      </div>

      <ng-template #loadingLines>
        <div class="drive-line muted">{{ loading ? 'Loading...' : '' }}</div>
      </ng-template>

      <ng-template #loadingLines2>
        <div class="drive-line muted">{{ loading ? 'Loading...' : '' }}</div>
      </ng-template>
    </div>

    <div class="start-right">
      <div class="start-map-wrap">
        <div id="startRideMap" class="start-map"></div>
      </div>
    </div>

  </div>
</div>

<div class="cancel-backdrop" *ngIf="showCancelPopup">
  <div class="cancel-modal">
    
    <div class="cancel-title">NOTIFICATION</div>

    <select class="cancel-select">
      <option value="" selected disabled>Cancel reason</option>
      <option value="PASSENGER_NOT_PRESENT">Passenger is not at the pickup location</option>
      <option value="HEALTH_ISSUE">Health issue</option>
      <option value="VEHICLE_PROBLEM">Vehicle problem</option>
      <option value="TRAFFIC_INCIDENT">Traffic incident / road blockage</option>
      <option value="SAFETY_CONCERN">Safety concern</option>
    </select>


    <button class="cancel-send" type="button" (click)="closeCancelPopup()">Send</button>
  </div>
</div>
