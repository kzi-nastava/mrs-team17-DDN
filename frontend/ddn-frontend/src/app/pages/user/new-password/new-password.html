<div class="new-wrapper">
  <!--  Naslov ekrana -->
  <h2>Create New Password</h2>

  <!-- optional token error -->
  <div *ngIf="!token" class="error">
    Missing token. Please request a new reset link.
  </div>

  <!-- optional server error -->
  <div *ngIf="serverError" class="error">
    {{ serverError }}
  </div>

  <!--  Reactive Form za unos nove lozinke -->
  <form class="new-form" [formGroup]="newPasswordForm" (ngSubmit)="onSubmit()">

    <!--  Polje za novu lozinku -->
    <div class="input-group">
      <input
        type="password"
        placeholder="Password"
        formControlName="password"
      />
    </div>
    <!--  Error poruka za password -->
    <div *ngIf="newPasswordForm.get('password')?.invalid && newPasswordForm.get('password')?.touched"
         class="error">
      Password is required
    </div>

    <!--  Polje za potvrdu lozinke -->
    <div class="input-group">
      <input
        type="password"
        placeholder="Confirm password"
        formControlName="confirmPassword"
      />
    </div>
    <!--  Error poruka za confirm password -->
    <div *ngIf="newPasswordForm.get('confirmPassword')?.invalid && newPasswordForm.get('confirmPassword')?.touched"
         class="error">
      Confirm password is required
    </div>

    <!-- extra mismatch message -->
    <div
      *ngIf="
        newPasswordForm.get('password')?.touched &&
        newPasswordForm.get('confirmPassword')?.touched &&
        newPasswordForm.value.password &&
        newPasswordForm.value.confirmPassword &&
        newPasswordForm.value.password !== newPasswordForm.value.confirmPassword
      "
      class="error"
    >
      Passwords do not match
    </div>

    <!--  Submit dugme (strelica) -->
    <button class="arrow-btn" type="submit" [disabled]="newPasswordForm.invalid || loading || !token">
      <img src="/right-arrow.png" alt="arrow" />
    </button>
  </form>
</div>
